import yaml
import sys
from schema import ConfigSchema  # adjust import as needed
from pydantic import ValidationError

def validate_yaml_config(config_path):
    try:
        with open(config_path, 'r') as file:
            config_data = yaml.safe_load(file)
    except FileNotFoundError:
        print(f"Error: '{config_path}' not found.")
        sys.exit(1)
    except yaml.YAMLError as e:
        print(f"YAML parsing error: {e}")
        sys.exit(1)

    try:
        config = ConfigSchema(**config_data)
        print("✅ YAML configuration is valid.")
        return config
    except ValidationError as e:
        print("❌ YAML validation failed:")
        print(e)
        sys.exit(1)
